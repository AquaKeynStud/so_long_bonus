.PHONY : all clean fclean re bonus norminette lmlx

NAME = so_long

# РЋГРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЋтЄ║ РЮќ BASICS VARIABLES РЮќ тіЏРЋњРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋ« #

CC				:=	cc

CFLAGS			:= -Wall -Wextra -Werror

RM				:=	rm	-rf

SHOW_MSG_CLEAN	=	true

MAKEFLAGS += --no-print-directory

# РЋ░РћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЏтЄ║ РЮќ тіЏРЋўРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋ» #

# РЋГРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЋтЄ║ РЮќ FILE TREE РЮќ тіЏРЋњРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋ« #

# directories
D_SRC	=	src/
D_INC	=	inc/
D_OBJ	=	.obj/
D_MLX	=	.minilibx/
D_LIB	=	librairies/
D_PAR	=	$(D_SRC)parsing/
D_PRI	=	$(D_SRC)printers/
D_KEY	=	$(D_SRC)input_handler/
D_IMG	=	$(D_SRC)display_handler/

D_SRCS	= $(D_SRC) $(D_PRI) $(D_PAR) $(D_IMG) $(D_KEY)

# file lists
LST_SRC		=	map.c				\
				main.c				\
				utils.c				\
				optis.c				\
				animation.c			\
				monsters_handler.c

LST_PRI		=	others.c			\
				err_printers.c		\
				map_printers.c		\
				print_on_window.c	

LST_PAR		=	bfs.c				\
				parsing.c		

LST_IMG		=	load_img.c			\
				display_img.c		

LST_KEY		=	actions.c			\
				input_detector.c	

LST_INC		=	utils.h				\
				bonus.h				\
				parsing.h			\
				$(NAME).h			\
				printers.h			\
				ft_printf.h			

LST_SRCS	=	$(LST_SRC) $(LST_PRI) $(LST_PAR) $(LST_IMG) $(LST_KEY)

INC	=	$(addprefix $(D_INC), $(LST_INC))

OBJ = $(addprefix $(D_OBJ), $(patsubst %.c, %.o, $(LST_SRCS)))

# РЋГРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЋтЄ║ РЮќ RULES РЮќ тіЏРЋњРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋ« #

all : $(NAME)

$(NAME)		:	$(OBJ) lmlx
	@$(CC) $(OBJ) -I$(D_INC) -L$(D_LIB) -lmlx -lXext -lX11 -lm -lftprintf -o $@
	@echo "\e[0;32mProgramme cr├Е├Е avec succ├еs ! ­ЪДг\e[0m"
	@$(MAKE) signature

vpath %.c $(D_SRCS)

$(D_OBJ)%.o	:	%.c $(INC) $(D_MLX)mlx.h $(D_MLX)mlx_int.h
	@mkdir -p $(D_OBJ)
	$(CC) $(CFLAGS) -I$(D_INC) -I$(D_MLX) -c $< -o $@

lmlx: $(D_MLX)
	@$(MAKE) -s -w -C $(D_MLX) 2>/dev/null
	@mv $(D_MLX)libmlx.a $(D_LIB)libmlx.a
	@echo "\e[0;36mArchive Minilibx cr├Е├Еe avec succ├еs ! ­ЪїЁ\e[0m"

clean:
ifeq ($(SHOW_MSG_CLEAN), true)
	@echo "\e[0;36mJ'ai enlev├Е tous les objets relatifs ├а $(NAME) ­ЪД╣\e[0m"
endif
	@$(MAKE) -s -w -C $(D_MLX) clean
	@$(RM) $(D_OBJ)

fclean:
	@$(MAKE) -s -w -C $(D_MLX) clean
	@$(MAKE) -s SHOW_MSG_CLEAN=false clean
	@$(RM) $(NAME) .bonus $(D_LIB)libmlx.a
	@echo "\e[0;34mExecutable de $(NAME) nettoy├Е ­ЪД╝\e[0m"

re :
	$(MAKE) fclean
	$(MAKE) all
	@echo "\e[0;32mProgramme $(NAME) recr├Е├Е avec succ├еs ! ­ЪФА\e[0m"

norminette:
	norminette $(D_SRC) $(D_INC)

valgrind: $(NAME)
	valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./so_long maps/500x100.ber

signature:
	@echo "\033[1;38;5;235m РађРађРађРађРађРађРађРБђРБђ"
	@echo "РађРађРађРађРађРађРБ░РБ┐РБ┐РБ┐РБ┐РБд\033[1;37mРБђРБђРБђ                                                                  \033[1;38;5;137m_\033[1;37m"
	@echo "РађРађ\033[38;2;130;255;180mРЋГРћђРћђРћђ\033[1;38;5;235mРб┐РБ┐РаЪРаІРаЅ\033[1;37mРађРађРађРађРаЅРаЉРабРБё\033[38;2;130;255;180mРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЅРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЋ\033[1;37m ­ЪФД­ЪЇЂ РЮќ сѓ▒сѓцсЃ│ РЮќ ­ЪДИ­Ъјђ \033[38;2;130;255;180mРЋњРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЅРћЂРћЂРћЂРћЂРћЂ\033[1;38;5;137m\\\`*-.\033[38;2;130;255;180mРћЂРћЂРћЂРћЂРћЂРћЂРЋЙРћђРћђРћђРћђРћђРћђРћђРћђРЋ« "
	@echo "РађРађ\033[38;2;130;255;180mРћѓ Рађ\033[1;37mРбаРаъРаЂРађРађРађРађРађРађРађРађРађРађРађ\033[1;38;5;235mРаЎРб┐РБ┐РБ┐РБдРАђ\033[1;37m                                                         \033[1;38;5;137m)  _\`-.\033[38;2;130;255;180m            Рћѓ "
	@echo "Рађ\033[1;38;5;235mРБђ\033[38;2;130;255;180mРћѓ\033[1;37m РбђРАЈ\033[1;38;5;235mРађРбђРБ┤РБХРБХРАёРађРађРађРађРађРађРађРађРађРб╗РБ┐РБ┐РаЄ\033[1;37m                                                        \033[1;38;5;137m.  : \`. .\033[38;2;130;255;180m           Рћѓ "
	@echo "\033[1;38;5;235mРБЙРБ┐РБ┐РБд\033[1;37mРБ╝РАђРађ\033[1;38;5;235mРб║РБ┐РБ┐РА┐РаЃРађРађРађРађРБаРБцРБёРађРађРаѕРА┐РаІ \033[1;37m                                                        \033[1;38;5;137m: _   '  \\033[38;2;130;255;180m           Рћѓ "
	@echo "\033[1;38;5;235mРб┐РБ┐РБ┐РБ┐РБ┐РБЄРађРацРаїРаЂРађРАђРб▓РАХРаёРбИРБЈРБ┐РБ┐\033[1;37mРађРађРађРАЄ                                                          \033[1;38;5;137m; \033[1;37m*\033[1;38;5;137m\` _.   \`*-._\033[38;2;130;255;180m     Рћѓ "
	@echo "\033[1;38;5;235mРаѕРб┐РБ┐РБ┐РБ┐РБ┐РБиРБёРАђРађРађРаѕРаЅРаЊРаѓРађРаЎРаЏРаЏ\033[1;37mРааРађРАИРаЂ                                                          \033[1;38;5;137m\`-.-'          \`-.\033[38;2;130;255;180m  Рћѓ "
	@echo "\033[1;38;5;235mРађРађРа╗РБ┐РБ┐РБ┐РБ┐РБ┐РБ┐РБиРБдРБёРБђ\033[1;37mРађРађРађРађРаЉРађРБаРаъРаЂРађ                                                            \033[1;38;5;137m;       \`       \`.\033[38;2;130;255;180m "
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;37mРбИРАЈ\033[1;38;5;235mРаЅРаЏРаЏРаЏРа┐Ра┐РБ┐РБ┐РБ┐РБ┐РБ┐РБ┐РБ┐РБ┐РАё\033[1;37mРађРађРађ      ­Ъњ« SO_LONG EXECUTABLE CREATED SUCCESSFULLY ­Ъјљ         \033[1;38;5;137m:.       .        \\033[38;2;130;255;180m "
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;37mРаИРађРађРађРађРађРађРађРађ\033[1;38;5;235mРаѕРаЅРаЏРб┐РБ┐РБ┐РБ┐РБ┐РАё\033[1;37mРађРађ                                                            \033[1;38;5;137m. \  .   :   .-'   .\033[38;2;130;255;180m"
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;37mРбиРађРађРађРађРађРађРађРађРађРађРађ\033[1;38;5;235mРаѕРб╗РБ┐РБ┐РБ┐РБ┐РАђ\033[1;37mРађ                                                            \033[1;38;5;137m'  \`+.;  ;  '      :\033[38;2;130;255;180m"
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;37mРбИРБєРађРађРађРађРађРађРађРађРађРађРађРађ\033[1;38;5;235mРБ┐РБ┐РБ┐РБ┐РАЄ\033[1;37mРађ                                                            \033[1;38;5;137m:  '  |    ;       ;-.\033[38;2;130;255;180m"
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;38;5;235mРбИРБ┐РБдРБђРађРађРађРађРађРађРађРађРбђРБ╝РАЪРа╗Ра┐РаЪРађ\033[1;37mРађ                                                            \033[1;38;5;137m; '   : :\`-:     _.\`* ;\033[38;2;130;255;180m"
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;38;5;235mРађРБ┐РБ┐РБ┐РБ┐РБХ\033[1;37mРаХРацРац\033[1;38;5;235mРбцРБХРБЙРБ┐РБ┐РАЄ\033[1;37m                                                                \033[1;38;5;137m.*' /  .*' ; .*\`- +'\`*'\033[38;2;130;255;180m"
	@echo "РађРађ\033[38;2;130;255;180mРћѓ\033[1;38;5;235mРађРа╣РБ┐РБ┐РБ┐РаЈРађРађРађ\033[1;38;5;235mРаѕРб┐РБ┐РБ┐РА┐РаЂ\033[1;37m                                                                \033[1;38;5;137m\`*-*   \`*-*  \`*-*'\033[38;2;130;255;180m Рћѓ "
	@echo "РађРађ\033[38;2;130;255;180mРЋ░РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРЋ╝РћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЅРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋЏ\033[1;37m ­ЪјЇ РЮќ РЏ▓ \033[38;2;130;255;180mРЋўРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРЋљРћЅРЋ╝РћЂРћЂРћЂРћЂРћЂРћЂРћЂРћЂРЋЙРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРЋ»"